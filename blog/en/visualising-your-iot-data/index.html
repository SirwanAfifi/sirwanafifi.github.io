<!DOCTYPE html><html lang="en"> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v4.13.4"><!-- Font preloads --><link rel="preload" href="/fonts/atkinson-regular.woff" as="font" type="font/woff" crossorigin><link rel="preload" href="/fonts/atkinson-bold.woff" as="font" type="font/woff" crossorigin><!-- Canonical URL --><link rel="canonical" href="https://sirwan.info/blog/en/visualising-your-iot-data/"><!-- Primary Meta Tags --><title>Visualising Your IoT Data</title><meta name="title" content="Visualising Your IoT Data"><meta name="description" content="Recently, I've learned a lot about the Internet of Things (IoT) and I just gotta share some of the cool stuff I've found. I'm using the ESP32 module to gather data from a temperature sensor and humidity sensor. I've used the Arduino IDE before, .."><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://sirwan.info/blog/en/visualising-your-iot-data/"><meta property="og:title" content="Visualising Your IoT Data"><meta property="og:description" content="Recently, I've learned a lot about the Internet of Things (IoT) and I just gotta share some of the cool stuff I've found. I'm using the ESP32 module to gather data from a temperature sensor and humidity sensor. I've used the Arduino IDE before, .."><meta property="og:image" content="https://sirwan.info/blog-placeholder-1.jpg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://sirwan.info/blog/en/visualising-your-iot-data/"><meta property="twitter:title" content="Visualising Your IoT Data"><meta property="twitter:description" content="Recently, I've learned a lot about the Internet of Things (IoT) and I just gotta share some of the cool stuff I've found. I'm using the ESP32 module to gather data from a temperature sensor and humidity sensor. I've used the Arduino IDE before, .."><meta property="twitter:image" content="https://sirwan.info/blog-placeholder-1.jpg"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><link rel="stylesheet" href="/assets/about.Bt-aXDuf.css">
<link rel="stylesheet" href="/assets/about.7yE1AjT0.css">
<style>a[data-astro-cid-eimmu3lg]{display:inline-block;text-decoration:none}a[data-astro-cid-eimmu3lg].active{font-weight:bolder;text-decoration:underline}
footer[data-astro-cid-sz7xmlte]{padding:2em 1em 6em;background:linear-gradient(var(--gray-gradient)) no-repeat;color:rgb(var(--gray));text-align:center}.social-links[data-astro-cid-sz7xmlte]{display:flex;justify-content:center;gap:1em;margin-top:1em}.social-links[data-astro-cid-sz7xmlte] a[data-astro-cid-sz7xmlte]{text-decoration:none;color:rgb(var(--gray))}.social-links[data-astro-cid-sz7xmlte] a[data-astro-cid-sz7xmlte]:hover{color:rgb(var(--gray-dark))}
</style><script type="module" src="/assets/hoisted.D-2wbxhY.js"></script></head> <body class="antialiased bg-zinc-900"> <header class="mb-30"> <nav class="w-full z-20 top-0 start-0 border-b border-gray-200 text-white dark:text-emerald-400"> <div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4"> <a href="/" class="flex items-center space-x-3 rtl:space-x-reverse"></a> <div class="flex md:order-2 space-x-3 md:space-x-0 rtl:space-x-reverse"></div> <div class="items-center justify-between w-full md:flex md:w-auto md:order-1"> <ul class="flex flex-col p-4 md:p-0 mt-4 font-medium border border-gray-100 rounded-lg md:space-x-8 rtl:space-x-reverse md:flex-row md:mt-0 md:border-0"> <li> <a href="/" data-astro-cid-eimmu3lg> Home </a>  </li><li> <a href="/blog/en" data-astro-cid-eimmu3lg> Blog </a>  </li><li> <a href="/about" data-astro-cid-eimmu3lg> About </a>  </li><li> <a href="/now" data-astro-cid-eimmu3lg> What I&#39;m Doing Now? </a>  </li> </ul> </div> </div> </nav> </header> <main> <article>  <div class="prose m-auto p-4"> <div class="title"> <div class="date">  </div> <h1 class="block gradient-title-en">Visualising Your IoT Data</h1> <hr class="m-2"> </div> <div class="space-x-1 text-sm text-gray-500 mb-2 flex flex-wrap items-center"> last year - &nbsp;<time datetime="2023-03-18T23:46:37.121Z">March 18, 2023</time> </div> <div class="tags"> <span class="text-gray-400 text-xs font-medium me-2 px-2.5 py-0.5 rounded border-dashed border-2 border-emerald-500">IoT</span><span class="text-gray-400 text-xs font-medium me-2 px-2.5 py-0.5 rounded border-dashed border-2 border-emerald-500">ESP32</span><span class="text-gray-400 text-xs font-medium me-2 px-2.5 py-0.5 rounded border-dashed border-2 border-emerald-500">Arduino</span><span class="text-gray-400 text-xs font-medium me-2 px-2.5 py-0.5 rounded border-dashed border-2 border-emerald-500">Grafana</span><span class="text-gray-400 text-xs font-medium me-2 px-2.5 py-0.5 rounded border-dashed border-2 border-emerald-500">InfluxDB</span> </div> <section class="main-body text-zinc-400">  <p>Recently, I’ve learned a lot about the Internet of Things (IoT) and I just gotta share some of the cool stuff I’ve found. I’m using the ESP32 module to gather data from a temperature sensor and humidity sensor. I’ve used the Arduino IDE before, but I’ve never really used it for anything serious. I’ve always used it for small projects like blinking LEDs. In one of our projects, we wanted to use this module as a sensor agent. It’s really easy to use, cheap, and cost-effective. Its performance is great, and the best thing is that it has WiFi and Bluetooth. If you’re interested in more info, you can check out their website.</p>
  <img src="/img/esp32.jpg" alt="esp32">
<p>There are numerous options available for coding this module, including Platform.io and Arduino. For those familiar with C#, you can even use nanoFramework for .NET. Personally, I found the Ardunio much easier to use and I got started with it in no time.</p>
 <img src="/img/arduino-ide.png" alt="arduino-ide">
<p>Getting sensor data is easy, just plug the sensor in and upload this code:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="cpp"><code><span class="line"><span style="color:#F97583">#include</span><span style="color:#9ECBFF"> &#x3C;Wire.h></span></span>
<span class="line"><span style="color:#F97583">#include</span><span style="color:#9ECBFF"> &#x3C;Adafruit_BME280.h></span></span>
<span class="line"><span style="color:#F97583">#include</span><span style="color:#9ECBFF"> &#x3C;WiFi.h></span></span>
<span class="line"><span style="color:#F97583">#include</span><span style="color:#9ECBFF"> &#x3C;HTTPClient.h></span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#F97583"> char*</span><span style="color:#E1E4E8"> ssid </span><span style="color:#F97583">=</span><span style="color:#9ECBFF"> "..."</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#F97583"> char*</span><span style="color:#E1E4E8"> password </span><span style="color:#F97583">=</span><span style="color:#9ECBFF"> "..."</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> INFLUXDB_TOKEN</span><span style="color:#9ECBFF"> "..."</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> INFLUX_URL</span><span style="color:#9ECBFF"> "http://192.168.10.98:8086/api/v2/write?org=ORG_NAME&#x26;bucket=BUCKET_NAME"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">WiFiClient espClient;</span></span>
<span class="line"><span style="color:#E1E4E8">Adafruit_BME280 bme;</span></span>
<span class="line"><span style="color:#E1E4E8">HTTPClient http;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">void</span><span style="color:#B392F0"> setup</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">  Serial.</span><span style="color:#B392F0">begin</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">115200</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">  WiFi.</span><span style="color:#B392F0">begin</span><span style="color:#E1E4E8">(ssid, password);</span></span>
<span class="line"><span style="color:#E1E4E8">  Serial.</span><span style="color:#B392F0">print</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"Connecting"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#F97583">  while</span><span style="color:#E1E4E8"> (WiFi.</span><span style="color:#B392F0">status</span><span style="color:#E1E4E8">() </span><span style="color:#F97583">!=</span><span style="color:#E1E4E8"> WL_CONNECTED) {</span></span>
<span class="line"><span style="color:#B392F0">    delay</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">500</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">    Serial.</span><span style="color:#B392F0">print</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"."</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">  Serial.</span><span style="color:#B392F0">print</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"Connected"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">  Serial.</span><span style="color:#B392F0">println</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">  Serial.</span><span style="color:#B392F0">print</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"Connected, IP address: "</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">  Serial.</span><span style="color:#B392F0">println</span><span style="color:#E1E4E8">(WiFi.</span><span style="color:#B392F0">localIP</span><span style="color:#E1E4E8">());</span></span>
<span class="line"><span style="color:#E1E4E8">  Wire.</span><span style="color:#B392F0">begin</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">  bme.</span><span style="color:#B392F0">begin</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">0x</span><span style="color:#79B8FF">77</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">void</span><span style="color:#B392F0"> loop</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">  String temperature </span><span style="color:#F97583">=</span><span style="color:#B392F0"> String</span><span style="color:#E1E4E8">(bme.</span><span style="color:#B392F0">readTemperature</span><span style="color:#E1E4E8">());</span></span>
<span class="line"><span style="color:#E1E4E8">  String humidity </span><span style="color:#F97583">=</span><span style="color:#B392F0"> String</span><span style="color:#E1E4E8">(bme.</span><span style="color:#B392F0">readHumidity</span><span style="color:#E1E4E8">());</span></span>
<span class="line"><span style="color:#E1E4E8">  String postData </span><span style="color:#F97583">=</span><span style="color:#9ECBFF"> "esp32bme28 temperature="</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> temperature </span><span style="color:#F97583">+</span><span style="color:#9ECBFF"> "</span><span style="color:#79B8FF">\n</span><span style="color:#9ECBFF">"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">  postData </span><span style="color:#F97583">+=</span><span style="color:#9ECBFF"> "esp32bme28 humidity="</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> humidity;</span></span>
<span class="line"><span style="color:#E1E4E8">  http.</span><span style="color:#B392F0">begin</span><span style="color:#E1E4E8">(INFLUX_URL);</span></span>
<span class="line"><span style="color:#E1E4E8">  http.</span><span style="color:#B392F0">addHeader</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"Authorization"</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">"Token "</span><span style="color:#F97583"> +</span><span style="color:#B392F0"> String</span><span style="color:#E1E4E8">(INFLUXDB_TOKEN));</span></span>
<span class="line"><span style="color:#F97583">  int</span><span style="color:#E1E4E8"> httpCode </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> http.</span><span style="color:#B392F0">POST</span><span style="color:#E1E4E8">(postData);</span></span>
<span class="line"><span style="color:#E1E4E8">  Serial.</span><span style="color:#B392F0">println</span><span style="color:#E1E4E8">(httpCode);</span></span>
<span class="line"><span style="color:#E1E4E8">  http.</span><span style="color:#B392F0">end</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#B392F0">  delay</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">1000</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<p>In the code, we start by including the required libraries like <code>Wire.h</code> for I2C communication, <code>Adafruit_BME280.h</code> for Wi-Fi communication, and <code>HTTPClient.h</code> for HTTP communication with InfluxDB. After the we have defined the constants for the Wi-Fi and InfluxDB. Next, we initialize the Wi-Fi and the BME280 sensor within the <code>setup()</code> function. Then, in the <code>loop()</code> function, we send the temperature and humidity to InfluxDB. The data is sent using the Line Protocol every second.</p>
  <img src="/img/influxdb-sensors_data.jpg" alt="esp32-temperature">
<p>Now that we have the data in InfluxDB, we can visualise it using Grafana. Grafana is a great tool for visualising data. It’s easy to use and has a lot of features. It’s also free and open-source:</p>
  <img src="/img/grafana-dashboard.jpg" alt="grafana">  </section> <hr> </div> </article> </main> <footer data-astro-cid-sz7xmlte> <span class="text-zinc-600 dark:text-zinc-400" data-astro-cid-sz7xmlte>
&copy; 2024 Sirwan Afifi. All rights reserved.
</span> <div class="social-links" data-astro-cid-sz7xmlte> <a href="https://twitter.com/SirwanAfifi" target="_blank" data-astro-cid-sz7xmlte> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" astro-icon="social/twitter" class="fill-zinc-500 hover:fill-white transition-colors duration-200" data-astro-cid-sz7xmlte><path d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z" data-astro-cid-sz7xmlte></path></svg> </a> <a href="https://github.com/SirwanAfifi" target="_blank" data-astro-cid-sz7xmlte> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" astro-icon="social/github" class="fill-zinc-500 hover:fill-white tr" data-astro-cid-sz7xmlte><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" data-astro-cid-sz7xmlte></path></svg> </a> </div> </footer>  </body></html>