<!DOCTYPE html><html lang="en"> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v4.13.4"><!-- Font preloads --><link rel="preload" href="/fonts/atkinson-regular.woff" as="font" type="font/woff" crossorigin><link rel="preload" href="/fonts/atkinson-bold.woff" as="font" type="font/woff" crossorigin><!-- Canonical URL --><link rel="canonical" href="https://sirwan.info/blog/fa/local-ai-models-in-browsers/"><!-- Primary Meta Tags --><title>Local AI Models in Browsers (Chrome Canary)</title><meta name="title" content="Local AI Models in Browsers (Chrome Canary)"><meta name="description" content="Browsers and operating systems are increasingly expected to have access to language models. This could really boost productivity, making tasks like translation and summarisation a lot easier."><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://sirwan.info/blog/fa/local-ai-models-in-browsers/"><meta property="og:title" content="Local AI Models in Browsers (Chrome Canary)"><meta property="og:description" content="Browsers and operating systems are increasingly expected to have access to language models. This could really boost productivity, making tasks like translation and summarisation a lot easier."><meta property="og:image" content="https://sirwan.info/img/chromeai/ai_namespace.png"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://sirwan.info/blog/fa/local-ai-models-in-browsers/"><meta property="twitter:title" content="Local AI Models in Browsers (Chrome Canary)"><meta property="twitter:description" content="Browsers and operating systems are increasingly expected to have access to language models. This could really boost productivity, making tasks like translation and summarisation a lot easier."><meta property="twitter:image" content="https://sirwan.info/img/chromeai/ai_namespace.png"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><link rel="stylesheet" href="/assets/about.Dbdu9t8o.css">
<link rel="stylesheet" href="/assets/about.yYN0WUpo.css">
<style>a[data-astro-cid-eimmu3lg]{display:inline-block;text-decoration:none}a[data-astro-cid-eimmu3lg].active{font-weight:bolder;text-decoration:underline}
footer[data-astro-cid-sz7xmlte]{padding:2em 1em 6em;background:linear-gradient(var(--gray-gradient)) no-repeat;color:rgb(var(--gray));text-align:center}.social-links[data-astro-cid-sz7xmlte]{display:flex;justify-content:center;gap:1em;margin-top:1em}.social-links[data-astro-cid-sz7xmlte] a[data-astro-cid-sz7xmlte]{text-decoration:none;color:rgb(var(--gray))}.social-links[data-astro-cid-sz7xmlte] a[data-astro-cid-sz7xmlte]:hover{color:rgb(var(--gray-dark))}
</style><script type="module" src="/assets/hoisted.D-2wbxhY.js"></script></head> <body class="antialiased bg-zinc-900"> <header class="mb-30"> <nav class="w-full z-20 top-0 start-0 border-b border-gray-200 text-white dark:text-emerald-400"> <div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4"> <a href="/" class="flex items-center space-x-3 rtl:space-x-reverse"></a> <div class="flex md:order-2 space-x-3 md:space-x-0 rtl:space-x-reverse"></div> <div class="items-center justify-between w-full md:flex md:w-auto md:order-1"> <ul class="flex flex-col p-4 md:p-0 mt-4 font-medium border border-gray-100 rounded-lg md:space-x-8 rtl:space-x-reverse md:flex-row md:mt-0 md:border-0"> <li> <a href="/" data-astro-cid-eimmu3lg> Home </a>  </li><li> <a href="/blog/en" data-astro-cid-eimmu3lg> Blog </a>  </li><li> <a href="/about" data-astro-cid-eimmu3lg> About </a>  </li><li> <a href="/now" data-astro-cid-eimmu3lg> /now </a>  </li> </ul> </div> </div> </nav> </header> <main> <article>  <div class="prose m-auto p-4"> <div class="title"> <div class="date">  </div> <h1 class="block gradient-title-en">Local AI Models in Browsers (Chrome Canary)</h1> <hr class="m-2"> </div> <div class="space-x-1 text-sm text-gray-500 mb-2 flex flex-wrap items-center"> 2 months ago - &nbsp;<time datetime="2024-09-09">September 9, 2024</time> </div> <div class="tags"> <span class="text-gray-400 text-xs font-medium me-2 px-2.5 py-0.5 rounded border-dashed border-2 border-emerald-500">AI</span><span class="text-gray-400 text-xs font-medium me-2 px-2.5 py-0.5 rounded border-dashed border-2 border-emerald-500">Browsers</span><span class="text-gray-400 text-xs font-medium me-2 px-2.5 py-0.5 rounded border-dashed border-2 border-emerald-500">Gemini Nano</span> </div> <section class="main-body text-zinc-400">  <p>Browsers and operating systems are increasingly expected to have access to language models. This could really boost productivity, making tasks like translation and summarisation a lot easier. as you probably know Apple has been trying to bring AI models into their devices using <a href="https://www.apple.com/uk/apple-intelligence/">Apple Intelligence</a>.</p>
<img src="https://www.apple.com/newsroom/images/2024/06/introducing-apple-intelligence-for-iphone-ipad-and-mac/article/Apple-WWDC24-Apple-Intelligence-hero-240610_big.jpg.large_2x.jpg" alt="Apple Intelligence">
<p>Google, on the other hand, is adding a local LLM (<a href="https://deepmind.google/technologies/gemini/nano/">Gemini Nano</a>) directly into its web browser; <strong>It‚Äôs quite <u>experimental</u> at the moment (it‚Äôs behind some flags and you have to enable them)</strong> but it‚Äôs a big step forward.
For us developers, this means we can build even better front-end experiences with almost no latency when getting results from the LLM. For instance, you could type in English and get real-time translations into other languages. With language models baked into browsers, there‚Äôs no need to rely on external API calls to OpenAI, Google Gemini, or others. As browsers start to natively support local LLMs pre-installed within them, this opens up a whole new world for web developers. Of course, remote LLMs still let us fine-tune models and do advanced things like RAG. Right now, the local version of Google Gemini which comes with Google Canary/Dev is a bit limited, it has smaller context windows and fewer tokens. I think in the future, we might be able to do those advanced RAG-like tasks locally as well.</p>
<figure>
  <img src="https://developer.chrome.com/static/docs/ai/built-in/chrome-ai-infra_1920.jpg" alt="">
  <figcaption class="text-center">This diagram demonstrates how your website or app can use task and exploratory web platform APIs to access models built into Chrome.
 <a href="https://developer.chrome.com/docs/ai/built-in">Buit-in AI</a>
  </figcaption>
</figure>
<p>You might be wondering why we even need this on-device AI and why it‚Äôs so important. The main reason is privacy. When handling sensitive data, we don‚Äôt want to expose that information to remote LLMs. This is especially crucial for industries like healthcare, where keeping patient data secure is a top priority. With on-device LLMs, we can ensure that data never leaves the device. This is a big win for privacy and security.</p>
<p><svg class="inline-block fill-white" width="18" height="18" viewBox="0 0 18 18"><path d="M15.78,13.39L11,7V4h2V2H5v2h2v3l-4.9,6.53c-0.34,0.47-0.39,1.1-0.12,1.62C2.24,15.67,2.77,16,3.36,16h11.28 c0.86,0,1.56-0.7,1.56-1.56C16.2,14.04,16.03,13.67,15.78,13.39z" fill="%2380868b"></path></svg> This <strong>experimental</strong> feature gives us a set of utility methods under the <code>ai</code> namespace to interact with the local LLM (Gemini Nano):</p>
<img src="/img/chromeai/ai_namespace.png" alt="AI namespace">
<p>Working with the local LLM is a bit tricky, as it only works on Chrome Canary or Dev. You must enable some flags:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>chrome://flags/#optimization-guide-on-device-model (set to "Enabled BypassPerfRequirement")</span></span>
<span class="line"><span>chrome://flags/#prompt-api-for-gemini-nano (set to "Enabled")</span></span>
<span class="line"><span></span></span></code></pre>
<p>Then install the modal:</p>
<img src="/img/chromeai/chrome_components.png" alt="Chrome Component">
<p>The project I am working on is a simple eshop that uses the LLM to generate reviews for products and summarise them. Here‚Äôs a quick demo:</p>
<ul>
<li>Writer API:</li>
</ul>
<iframe width="560" height="315" src="https://www.youtube.com/embed/aBpOJgAdxWM?si=viZXt6YMC_x4Pc0a" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
<ul>
<li>Summarisation API:</li>
</ul>
<iframe width="560" height="315" src="https://www.youtube.com/embed/4ZKLe4OVJnM?si=OoUXbKfPnutqse6I" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
<p>Both APIs are quite simple to use:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="tsx"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#B392F0"> handleGenerateReview</span><span style="color:#F97583"> =</span><span style="color:#F97583"> async</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  try</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> writer</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#E1E4E8"> window.ai.writer.</span><span style="color:#B392F0">create</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> stream</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#E1E4E8"> writer.</span><span style="color:#B392F0">writeStreaming</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#9ECBFF">      `Based on the following product details:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF">Title: ${</span><span style="color:#E1E4E8">product</span><span style="color:#9ECBFF">.</span><span style="color:#E1E4E8">title</span><span style="color:#9ECBFF">}</span></span>
<span class="line"><span style="color:#9ECBFF">Description: ${</span><span style="color:#E1E4E8">product</span><span style="color:#9ECBFF">.</span><span style="color:#E1E4E8">description</span><span style="color:#9ECBFF">}</span></span>
<span class="line"><span style="color:#9ECBFF">I have rated it ${</span><span style="color:#E1E4E8">newReview</span><span style="color:#9ECBFF">.</span><span style="color:#E1E4E8">rating</span><span style="color:#9ECBFF">} stars out of 5.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF">Please write a review reflecting this rating. Make sure to:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF">Mention the rating number explicitly in the review.</span></span>
<span class="line"><span style="color:#9ECBFF">Tailor the tone to the rating given.</span></span>
<span class="line"><span style="color:#9ECBFF">Include (must) a relevant emoji to match the overall sentiment.</span></span>
<span class="line"><span style="color:#9ECBFF">Rating Guide:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF">1 star: Terrible üò°</span></span>
<span class="line"><span style="color:#9ECBFF">2 stars: Bad üòû</span></span>
<span class="line"><span style="color:#9ECBFF">3 stars: Average üòê</span></span>
<span class="line"><span style="color:#9ECBFF">4 stars: Good üôÇ</span></span>
<span class="line"><span style="color:#9ECBFF">5 stars: Excellent üòç</span></span>
<span class="line"><span style="color:#9ECBFF">      `</span></span>
<span class="line"><span style="color:#E1E4E8">    );</span></span>
<span class="line"><span style="color:#F97583">    for</span><span style="color:#F97583"> await</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">const</span><span style="color:#79B8FF"> chunk</span><span style="color:#F97583"> of</span><span style="color:#E1E4E8"> stream) {</span></span>
<span class="line"><span style="color:#B392F0">      setNewReview</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">prev</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> ({</span></span>
<span class="line"><span style="color:#F97583">        ...</span><span style="color:#E1E4E8">prev,</span></span>
<span class="line"><span style="color:#E1E4E8">        content: </span><span style="color:#9ECBFF">""</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">      }));</span></span>
<span class="line"><span style="color:#B392F0">      setNewReview</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">prev</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> ({</span></span>
<span class="line"><span style="color:#F97583">        ...</span><span style="color:#E1E4E8">prev,</span></span>
<span class="line"><span style="color:#E1E4E8">        content: prev.content </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> chunk,</span></span>
<span class="line"><span style="color:#E1E4E8">      }));</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">  } </span><span style="color:#F97583">catch</span><span style="color:#E1E4E8"> (error) {}</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> const</span><span style="color:#B392F0"> ShowSummary</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">props</span><span style="color:#F97583">:</span><span style="color:#B392F0"> ShowSummaryProps</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#E1E4E8"> [</span><span style="color:#79B8FF">summary</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">setSummary</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#B392F0"> useState</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#79B8FF">string</span><span style="color:#E1E4E8">>(</span><span style="color:#9ECBFF">""</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#E1E4E8"> [</span><span style="color:#79B8FF">loading</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">setLoading</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#B392F0"> useState</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#79B8FF">boolean</span><span style="color:#E1E4E8">>(</span><span style="color:#79B8FF">false</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#B392F0"> generateSummary</span><span style="color:#F97583"> =</span><span style="color:#F97583"> async</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">    try</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#B392F0">      setLoading</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#F97583">      const</span><span style="color:#79B8FF"> summarizer</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#E1E4E8"> window.ai.summarizer.</span><span style="color:#B392F0">create</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#F97583">      const</span><span style="color:#79B8FF"> result</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#E1E4E8"> summarizer.</span><span style="color:#B392F0">summarize</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">`</span></span>
<span class="line"><span style="color:#9ECBFF">          Here is a list of customer reviews for the product:</span></span>
<span class="line"><span style="color:#9ECBFF">          Reviews: ${</span><span style="color:#E1E4E8">props</span><span style="color:#9ECBFF">.</span><span style="color:#E1E4E8">context</span><span style="color:#9ECBFF">}</span></span>
<span class="line"><span style="color:#9ECBFF">          Please:</span></span>
<span class="line"><span style="color:#9ECBFF">          Summarise the key points and sentiments from these reviews.</span></span>
<span class="line"><span style="color:#9ECBFF">          Provide a clear takeaway on whether the product is worth buying or not, based on the overall consensus.</span></span>
<span class="line"><span style="color:#9ECBFF">          Make sure to highlight any recurring themes, positives, or concerns that are mentioned frequently.</span></span>
<span class="line"><span style="color:#9ECBFF">          Result should be super concise in one paragraph. The result must be in markdown table format, add an hr before the table.</span></span>
<span class="line"><span style="color:#9ECBFF">      `</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#B392F0">      setSummary</span><span style="color:#E1E4E8">(result);</span></span>
<span class="line"><span style="color:#B392F0">      setLoading</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">false</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">    } </span><span style="color:#F97583">catch</span><span style="color:#E1E4E8"> (error) {}</span></span>
<span class="line"><span style="color:#E1E4E8">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  return</span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#79B8FF">Dialog</span></span>
<span class="line"><span style="color:#B392F0">      open</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{props.isModalOpen}</span></span>
<span class="line"><span style="color:#B392F0">      onOpenChange</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{() </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">        props.</span><span style="color:#B392F0">setIsModalOpen</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">props.isModalOpen);</span></span>
<span class="line"><span style="color:#B392F0">        generateSummary</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">      }}</span></span>
<span class="line"><span style="color:#E1E4E8">    ></span></span>
<span class="line"><span style="color:#E1E4E8">      ...</span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#79B8FF">Dialog</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  );</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span>
<span class="line"></span></code></pre>
<p>Personally, I think this is huge. It makes front-end development easier and gives users a smoother overall experience with great UX.</p>
<h2 id="references">References</h2>
<ul>
<li><a href="https://developer.chrome.com/docs/ai/built-in">Built-in AI</a></li>
<li><a href="https://github.com/explainers-by-googlers/prompt-api">explainers-by-googlers/prompt-api: A proposal for a web API for prompting browser-provided language models</a></li>
<li><a href="https://github.com/WICG/translation-api">WICG/translation-api: A proposal for a web translation API</a></li>
</ul>  </section> <hr> </div> </article> </main> <footer data-astro-cid-sz7xmlte> <span class="text-zinc-600 dark:text-zinc-400" data-astro-cid-sz7xmlte>
&copy; 2024 Sirwan Afifi. All rights reserved.
</span> <div class="social-links" data-astro-cid-sz7xmlte> <a href="https://twitter.com/SirwanAfifi" target="_blank" data-astro-cid-sz7xmlte> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" astro-icon="social/twitter" class="fill-zinc-500 hover:fill-white transition-colors duration-200" data-astro-cid-sz7xmlte><path d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z" data-astro-cid-sz7xmlte></path></svg> </a> <a href="https://github.com/SirwanAfifi" target="_blank" data-astro-cid-sz7xmlte> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" astro-icon="social/github" class="fill-zinc-500 hover:fill-white tr" data-astro-cid-sz7xmlte><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" data-astro-cid-sz7xmlte></path></svg> </a> </div> </footer>  </body></html>